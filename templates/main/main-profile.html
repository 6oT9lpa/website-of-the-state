<div class='all-content'>
    {% if access_denied %}
        <script>
        showAccessDenied();
        </script>
    {% endif %}

    <div class="container">
        <div class="profile-card">
            <div class="profile-header">
                <div class="avatar">
                    <img src="{{ url_for('static', filename='img/ava.png')}}">
                    <span>edit</span>
                </div>
                <div class="profile-info">
                    <div class="profile-info-row">
                        <div class="profile-info-label"><p>NIK NAME</p></div>
                        <div class="profile-info-value"><p>{{ current_user.nikname if not is_guest else current_user.nickname }}</p></div>
                    </div>
                    {% if not is_guest %}
                        <div class="profile-info-row">
                            <div class="profile-info-label"><p>RANK</p></div>
                            <div class="profile-info-value"><p>{{ current_user.curr_rank }} | {{ rank_name }}</p></div>
                        </div>
                        <div class="profile-info-row">
                            <div class="profile-info-label"><p>ORGAN</p></div>
                            <div class="profile-info-value"><p>{{ current_user.organ }}</p></div>
                        </div>
                        <div class="profile-info-row">
                            <div class="profile-info-label"><p>WARNS</p></div>
                            <div class="profile-info-value"><p><SW>{{ current_user.SW }}/3</SW> <YW>{{ current_user.YW }}/2</YW></p></div>
                        </div>
                        <a class="profile-audit" href="#">me audit</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class='modal-setting-profile' style='display:none;'>
            <div class='content-modal'>
                <div class="header-modal">
                    <span class="btn-modal-close" id="btn-modal-close" onclick="CloseModal('.modal-setting-profile')">&times;</span>
                </div>
                <div class='form-control'>
                    <label for="nicknamech">Сменить имя фамилию.</label>
                    <div class='submit-btn'>
                        <button id="nicknamech" onclick="showNicknameInput()">Вазер</button>
                    </div>
                </div>
                <div class="input-group hidden" id="nickname-change">
                    <form method='POST' action='/profile_settings'>
                    <label for="new-nickname">Введите новый ник:</label>
                    <input type="text" id="new-nickname" name="nickname" placeholder="Новый ник">
                    <div class="submit-btn">
                        <button class="btn" type="button" id="back-btn" onclick="hideNicknameInput()">Назад</button>
                        <button class="btn" type="submit">Отправить</button>
                    </div>
                </div> 
            </div> 
        </form>
    </div>
    <script>
        function openmodal(modal) {
            document.querySelector(modal).style.display = 'block'
            document.querySelectorAll('#overlay').forEach(o => {
                o.classList.add('active');
            });
            setTimeout(() => {
                document.querySelector(modal).classList.remove('hidden-modal-district');
                document.querySelector(modal).classList.add('show-modal-district');
            }, 10)
        }
        function showNicknameInput() {
            document.getElementById('nickname-change').classList.remove('hidden'); // Показываем поле ввода
            document.getElementById('change-nick-btn').classList.add('hidden'); // Скрываем кнопку "Сменить имя"
            document.getElementById('other-btn').classList.add('hidden'); // Скрываем другую кнопку
        }

        // Прячет поле ввода и возвращает исходные кнопки
        function hideNicknameInput() {
            document.getElementById('nickname-change').classList.add('hidden'); // Скрываем поле ввода
            document.getElementById('change-nick-btn').classList.remove('hidden'); // Показываем кнопку "Сменить имя"
            document.getElementById('other-btn').classList.remove('hidden'); // Показываем другую кнопку
        }
    </script>
</div>
